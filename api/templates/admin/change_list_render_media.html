{% extends 'admin/change_list.html' %}
{% load static %}

{% block footer %}
{{ block.super }}

<!-- Render images fields instead of show link -->
<script>
  // Sarch images cells
  const selector_media_cell = "#result_list td.field-image, #result_list td.field-logo, #result_list td.field-image, #result_list td.field-source"
  const media_cells = document.querySelectorAll(selector_media_cell)

  // Create images and replace links
  media_cells.forEach (media_cell => {

    const link = media_cell.textContent

    let media_elem
    if (link.includes(".mp4")) {

      // Render video iframe
      media_elem = document.createElement("video")
      media_elem.classList.add("video")
    } else {
      // Render image
      media_elem = document.createElement("img")
      media_elem.classList.add("image")
    }
    media_elem.src = link
    media_cell.innerHTML = ""
    media_cell.appendChild(media_elem)
  })

  </script>

  <style>
    .image, .video {
      max-width: 80px;
    }

    #result_list td.field-image, #result_list td.field-logo {
      text-align: center;
    }
  </style>

{% endblock %}